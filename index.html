<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>ARET - Automation Research & Embedded Technologies</title>
   
   <!-- Bootstrap CSS -->
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
   
   <!-- Font Awesome -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
   
   <!-- Custom CSS -->
   <link rel="stylesheet" href="css/bootstrap-style.css">
</head>
<body>
   <!-- Include Header -->
   <div id="header-container"></div>
   
   <!-- Featured Courses Section -->
   <section class="courses py-5 bg-light">
      <div class="container">
         <h1 class="heading text-center mb-5">Featured Courses</h1>
         <div id="courses-grid" class="row g-4">
            <!-- Course cards will be dynamically generated here -->
         </div>
         <div class="text-center mt-4">
            <a href="courses.html" class="btn btn-outline-primary btn-lg">View All Courses</a>
         </div>
      </div>
   </section>

   <!-- Why Choose ARET Section -->
   <section class="reviews py-5 bg-light">
      <div class="container">
         <h1 class="heading text-center mb-5">Why Choose ARET?</h1>
         <div class="row">
            <div class="col-md-4 mb-4">
               <div class="card h-100 text-center p-4 shadow-sm">
                  <div class="card-body">
                     <img src="images/pic-50.jpg" alt="Flexible Schedule" class="img-fluid rounded-circle mb-3" style="width: 100px; height: 100px; object-fit: cover;">
                     <h3 class="card-title">Flexible Schedule</h3>
                     <p class="card-text">Learn anytime, anywhere and even at your place through online.</p>
                  </div>
               </div>
            </div>
            <div class="col-md-4 mb-4">
               <div class="card h-100 text-center p-4 shadow-sm">
                  <div class="card-body">
                     <img src="images/one2one.jpg" alt="One-to-One Training" class="img-fluid rounded-circle mb-3" style="width: 100px; height: 100px; object-fit: cover;">
                     <h3 class="card-title">One-To-One Training</h3>
                     <p class="card-text">We also offer one-to-one online or offline training facilities.</p>
                  </div>
               </div>
            </div>
            <div class="col-md-4 mb-4">
               <div class="card h-100 text-center p-4 shadow-sm">
                  <div class="card-body">
                     <img src="images/cost.jpg" alt="Affordable Course Fee" class="img-fluid rounded-circle mb-3" style="width: 100px; height: 100px; object-fit: cover;">
                     <h3 class="card-title">Affordable Course Fee</h3>
                     <p class="card-text">We provide quality training at low cost.</p>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </section>

   <!-- Skills Quote Section -->
   <section class="courses py-5">
      <div class="container">
         <div class="row justify-content-center">
            <div class="col-lg-8 text-center">
               <div class="card shadow-sm p-4">
                  <h1 class="heading mb-4">"Skills Are The Key To Unlocking Potential"</h1>
                  <p>
                     <strong style="font-size: 16px; color: green;">
                     Hence we are determined to skill the present generation in skill development and innovative research through 
                     online / offline education. With experienced instructors, hands-on projects and state-of-the-art equipment, 
                     we provide industry-based technical training to master industrial automation and embedded systems
                     </strong>
                  </p>
                  <p class="text-decoration-line-through text-danger" style="font-size:15px;">10000.00</p>
                  <pre class="mt-3 mb-4">"LEARN beyond boundaries, start, shift or enhance your CAREER."</pre>
                  <a href="courses.html" class="btn btn-primary">View Courses</a>
               </div>
            </div>
         </div>
      </div>
   </section>

   <!-- Include Footer -->
   <div id="footer-container"></div>
   
   <!-- Bootstrap JS Bundle with Popper -->
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
   
   <!-- Custom JS -->
   <script src="js/script.js"></script>
   <script src="js/course-generator.js"></script>
   
   <script>
   // Load header and footer
   document.addEventListener('DOMContentLoaded', function() {
       // Load header first
       fetch('templates/header.html')
           .then(response => response.text())
           .then(html => {
               document.getElementById('header-container').innerHTML = html;
               // Initialize navigation after header is loaded
               if (typeof setActiveNavLink === 'function') {
                   setActiveNavLink();
               }
           })
           .catch(error => {
               console.error('Error loading header:', error);
           });
           
       // Load footer
       fetch('templates/footer.html')
           .then(response => response.text())
           .then(html => {
               document.getElementById('footer-container').innerHTML = html;
           })
           .catch(error => {
               console.error('Error loading footer:', error);
           });
           
       // Load featured courses
       fetch('data/courses.json')
           .then(response => response.json())
           .then(data => {
               const courses = data.courses.slice(0, 3); // Get first 3 courses as featured
               const coursesGrid = document.getElementById('courses-grid');
               
               if (coursesGrid) {
                   courses.forEach((course, index) => {
                       const courseCard = createCourseCard(course);
                       coursesGrid.appendChild(courseCard);
                       
                       // Initialize image loading for each card
                       const img = courseCard.querySelector('img');
                       if (img) {
                           img.onload = function() {
                               this.style.opacity = '1';
                               this.classList.add('loaded');
                           };
                           img.onerror = function() {
                               console.error('Failed to load image:', this.src);
                               // Try alternative image paths
                               if (this.src.includes('thumb-')) {
                                   this.src = 'images/course-placeholder.svg';
                               } else {
                                   this.src = 'https://via.placeholder.com/300x200/6c5ce7/ffffff?text=Course+Image';
                               }
                               this.style.opacity = '1';
                           };
                           
                           // Check if image is already loaded (cached)
                           if (img.complete && img.naturalHeight !== 0) {
                               img.style.opacity = '1';
                               img.classList.add('loaded');
                           }
                       }
                   });
               }
           })
           .catch(error => {
               console.error('Error loading featured courses:', error);
           });
   });
   
   // Create course card function
   function createCourseCard(course) {
       const col = document.createElement('div');
       col.className = 'col-lg-4 col-md-6 mb-4';
       
       const discount = Math.round((1 - course.price / course.originalPrice) * 100);
       
       col.innerHTML = `
           <div class="card h-100 shadow-sm course-card">
               <div class="position-relative">
                   <img src="${course.image}" class="card-img-top" alt="${course.title}" loading="lazy" style="opacity: 0; transition: opacity 0.3s ease;">
                   ${discount > 0 ? `<span class="position-absolute top-0 end-0 bg-danger text-white px-2 py-1 rounded m-2">${discount}% OFF</span>` : ''}
                   <span class="position-absolute bottom-0 start-0 bg-primary text-white px-2 py-1 rounded m-2">${course.level}</span>
               </div>
               <div class="card-body">
                   <h3 class="card-title">${course.title}</h3>
                   ${course.subtitle ? `<h6 class="text-muted mb-3">${course.subtitle}</h6>` : ''}
                   <p class="card-text">${course.description}</p>
                   
                   <div class="d-flex justify-content-between align-items-center mb-3">
                       <div>
                           <span class="text-primary fw-bold h5 mb-0">BDT: ${formatCurrency(course.price)}</span>
                           ${course.originalPrice > course.price ? `<span class="text-decoration-line-through text-muted ms-2">BDT: ${formatCurrency(course.originalPrice)}</span>` : ''}
                       </div>
                       <span class="badge bg-secondary">${course.duration}</span>
                   </div>
                   
                   <div class="d-flex justify-content-between align-items-center">
                       <small class="text-muted">
                           <i class="fas fa-user-tie me-1"></i> ${course.instructor}
                       </small>
                       <a href="${course.enrollmentUrl}" class="btn btn-primary btn-sm">View Details</a>
                   </div>
               </div>
           </div>
       `;
       
       // Initialize enhanced image loading with shimmering effect
       const img = col.querySelector('img');
       if (img) {
           // Add shimmering effect while loading
           img.style.backgroundImage = 'linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)';
           img.style.backgroundSize = '200% 100%';
           img.style.animation = 'loading 1.5s infinite';
           
           img.onload = function() {
               // Remove loading animation and show image
               this.style.backgroundImage = '';
               this.style.animation = '';
               this.style.opacity = '1';
               this.classList.add('loaded');
               console.log('Image loaded successfully:', this.src);
           };
           
           img.onerror = function() {
               console.error('Failed to load image:', this.src);
               // Try alternative image paths with cascading fallbacks
               if (this.src.includes('thumb-') && !this.src.includes('course-placeholder')) {
                   this.src = 'images/course-placeholder.svg';
               } else if (!this.src.includes('placeholder')) {
                   this.src = 'https://via.placeholder.com/300x200/6c5ce7/ffffff?text=Course+Image';
               } else {
                   // Final fallback - remove loading animation and show placeholder background
                   this.style.backgroundImage = 'linear-gradient(135deg, #6c5ce7 0%, #a777e3 100%)';
                   this.style.animation = '';
               }
               this.style.opacity = '1';
           };
           
           // Check if image is already loaded (cached)
           if (img.complete && img.naturalHeight !== 0) {
               img.style.backgroundImage = '';
               img.style.animation = '';
               img.style.opacity = '1';
               img.classList.add('loaded');
           }
       }
       
       return col;
   }
   
   // Format currency function
   function formatCurrency(amount) {
       return new Intl.NumberFormat('en-BD', {
           style: 'decimal',
           minimumFractionDigits: 0,
           maximumFractionDigits: 0
       }).format(amount);
   }
   </script>
</body>
</html>
